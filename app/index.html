<!DOCTYPE html>
<html>

<head>
    <title>MARIA</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href='./stylesheets/app.css' rel='stylesheet' type='text/css'>
    <link href='./stylesheets/tables.css?v=3' rel='stylesheet' type='text/css'>
    <link href='./external/tableexport.min.css' rel='stylesheet' type='text/css'>
    <style type="text/css">
    
    .bs-example {
        margin: 5px;
    }
    </style>
</head>

<body>
    <div id="mytabs">
        <nav class="navbar navbar-custom navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <span class="icon-bar"></span><a href="/#/" class="navbar-brand">MARIA â„¢</a>
                </div>
                <div>
                    <p class="navbar-text navbar-right" id="loginStatus" style ="display:none">Logged in as <a href="#" class="navbar-link" id="actor">Physician</a>
                    </p>
                </div>
            </div>
        </nav>
    </div>
    <div class="header">
        <h3>MARIA</h3>
    </div>
    <div class="clear">
        <div class="section">
            </br>
            <a href="/index.html"><img src="./images/logo.png" alt="meraki_0_cropped" border="0"></a>
            </br>
            </br>
            <h2>Artificial Intelligence Research Assistant for Medicine</h2>
        </div>
    </div>
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#sectionA" id="phy_tab"><i class="fa fa-user-md"></i> Physician</a></li>
        <li><a data-toggle="tab" href="#sectionB" id="sci_tab"><i class="fa fa-user"></i> Scientist</a></li>
        <li><a data-toggle="tab" href="#sectionC" id="lea_tab"><i class="fa fa-trophy"></i> Leaderboard</a></li>        
        <li><a data-toggle="tab" href="#dropdown1"><i class="fa fa-link"></i> Blockchain View</a></li>
        <li><a data-toggle="tab" href="#sectionD" id="fhir_tab"><i class="fa fa-fire"></i> FHIR Viewer</a></li>
    </ul>
    <div class="tab-content">
        <div id="sectionA" class="tab-pane fade in active">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="physicianAccount"></div>
                <div class="col-xs-10" id="physicianBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse1">
          Create Competition
        </a>
      </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="demo-content bg-alt">
                                    <div>
                                            <button id="deployContract" class="btn btn-primary">Initiate Competition Factory</button>
                                            <span class="success" id="deployContractSuccess"></span>
                                        </div>
                                    </br>
                                <div class="form-group">
                                    <label for="inputPrize">Prize</label>
                                    <input type="text" class="form-control" id="inputPrize" placeholder="Enter Prize Amount">
                                </div>                                
                                <div class="form-group">
                                    <label for="inputDeadline">Deadline</label>
                                    <input type="text" class="form-control" id="inputDeadline" placeholder="Enter Deadline">
                                </div>
                                </br>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Training Set</span>
                                    <input name="uploaded_file" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());store();" style="display: none;" type="file" id="source">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccess"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadDatasetSuccess"></span>
                                </div>                                                                
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Test Set</span>
                                    <input name="uploaded_fileb" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());storeb();" style="display: none;" type="file" id="sourceb">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccessB"></span>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Test Outcome</span>
                                    <input name="uploaded_filec" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());storec();" style="display: none;" type="file" id="sourcec">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccessC"></span>
                                </div>                              
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionB" class="tab-pane fade">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="scientistAccount"></div>
                <div class="col-xs-10" id="scientistBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse2">
          Competitions
        </a>
      </h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <!-- <div id="competitionId" style="display:none;">-->
                            <div id="competitionId">
                                <table class="table table-striped">
                                    <tbody>
                                        <tr>
                                            <th colspan="2" style="text-align:left">Description</th>
                                        </tr>
                                        <tr>
                                            <td>Id</td>
                                            <td id="theCompetitionId"></td>
                                        </tr>
                                        <tr>
                                            <td>Prize</td>
                                            <td id="thePrize"></td>
                                        </tr>
                                        <tr>
                                            <td>Deadline</td>
                                            <td id="theDeadline"></td>
                                        </tr>
                                        <tr>
                                            <td>Dataset</td>
                                            <td id="hash"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </br>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Model</span>
                                    <input name="uploaded_file2" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());store2();" style="display: none;" type="file" id="source2">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccess2"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadDatasetSuccess2"></span>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="inputWinner" placeholder="Enter the winner's address">
                                </div>
                                <div>
                                <button id="doPayouts" class="btn btn-primary">Execute Payouts</button>
                                <span class="success" id="payoutSuccess"></span>
                            </div>
                                </br>
                                </br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionC" class="tab-pane fade">
                <div class="section">
                        <table id="competitions" class="table table-striped">
                            <thead id="competitionsheader">
                                <th>CompetitionId</th>
                                <th>Prize</th>
                                <th>Winner</th>
                            </thead>
                            <tbody id="competitionsbody">
                            </tbody>
                        </table>
                    </div>
        </div>
        <div id="dropdown1" class="tab-pane fade">
            <div class="section">
                <table id="audittrail" class="table table-striped">
                    <thead id="audittrailheader">
                        <th>Event</th>
                        <th>CompetitionId</th>
                        <th>Actor</th>
                        <th>Data</th>
                        <th>Cost</th>
                        <th>Timestamp</th>
                    </thead>
                    <tbody id="audittrailbody">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="sectionD" class="tab-pane fade">
            <div class="section">

                <!--<table id="patientData" class="table table-striped">
                    <thead id="patientDataHeader">
                        <th>(CSV Column Headers Here, when determined)</th>
                    </thead>
                    <tbody>
                    <tr><td id ="fhirData"></td></tr>
                    </tbody>
                </table>-->
                <div id="fhirData" ></div>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/sweetalert2@7.18.0/dist/sweetalert2.all.js"></script>
<script src="https://unpkg.com/ipfs/dist/index.js"></script>
<script src="https://unpkg.com/ipfs-api/dist/index.js"></script>

	<script>
		$('.js-pscroll').each(function(){
			var ps = new PerfectScrollbar(this);

			$(window).on('resize', function(){
				ps.update();
			})
		});
			
		
	</script>
<!--===============================================================================================-->
    
<script>
swal({
  title: 'Login',
  backdrop:  `
    rgba(0,0,0,0.8)
    center left
    no-repeat
  `,
  html:
    '<input id="swal-input1" class="swal2-input" placeholder ="Username">' +
    '<input id="swal-input2" class="swal2-input" type="password" placeholder ="Password">',
  preConfirm: function () {
    return new Promise(function (resolve) {
      resolve([
        $('#swal-input1').val(),
        $('#swal-input2').val()
      ])
    })
  },
  onOpen: function () {
    $('#swal-input1').focus()
  }
}).then(function (result) {
  swal(
      'Logged in as Physician',
      '',
      'success'
    ).then((result) => {    
    demoLogin();    
    });
}).catch(swal.noop)
</script>
<!-- <script src="https://rawgithub.com/smart-on-fhir/client-js/master/dist/fhir-client.js"></script> -->

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="javascripts/app.js"></script>  
  <script src="external/filesaver.js"></script>
  <script src="external/tableexport.js"></script>
<!-- <script src="javascripts/export.js?v=3"></script> -->
  
<!--REACT-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script type="text/babel" src="javascripts/fhir.jsx?v=25"></script>

</html>